{% extends "base.html" %}

{% block title %}Quiz: {{ quiz.name }} - CyberMjanja{% endblock %}

{% block content %}

<!-- This is the blue header banner at the top of the page -->
<div class="container-fluid page-header py-5">
    <div class="container text-center py-5">
        <h1 class="display-2 text-white mb-4 animated slideInDown">{{ quiz.name }}</h1>
        <h4 class="text-white animated slideInUp">{{ quiz.description }}</h4>
    </div>
</div>

<!-- This is the main body with the new modern quiz layout -->
<div class="quiz-body-modern">
    <div class="quiz-container-modern">
        
        <form action="{{ url_for('submit_answer', slug=quiz.slug) }}" method="post">
            <!-- ======================= -->
            <!--      QUIZ HEADER        -->
            <!-- ======================= -->
            <div class="quiz-header-modern">
                <h2>Question {{ current_q_num }} of {{ total_questions }}</h2>
                <!-- UPDATED: This is now a functional checkbox that submits with the form -->
                <div class="bookmark-container">
                    <input class="bookmark-checkbox" type="checkbox" name="bookmark" id="bookmark-check">
                    <label class="bookmark-btn" for="bookmark-check">
                        <i class="far fa-bookmark"></i> Bookmark
                    </label>
                </div>
            </div>

            <!-- ======================= -->
            <!--   QUIZ QUESTION FORM    -->
            <!-- ======================= -->
            <div class="quiz-content-modern">
                <!-- Hidden fields to pass necessary data -->
                <input type="hidden" name="question_id" value="{{ question.id }}">
                <input type="hidden" name="current_q_num" value="{{ current_q_num }}">
                <input type="hidden" name="total_questions" value="{{ total_questions }}">

                <p class="question-text-modern">{{ question.question_text }}</p>
                
                <ul class="answers-list">
                    {% for answer in answers %}
                    <li class="answer-item">
                        <input type="radio" name="answer" value="{{ answer.id }}" id="ans-{{ answer.id }}" required>
                        <label class="answer-label-modern" for="ans-{{ answer.id }}">
                            {{ answer.answer_text }}
                        </label>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <!-- ======================= -->
            <!--      QUIZ FOOTER        -->
            <!-- ======================= -->
            <div class="quiz-footer-modern">
                <div>
                    {% if current_q_num > 1 %}
                        <a href="{{ url_for('run_quiz', slug=quiz.slug, q_num=current_q_num - 1) }}" class="footer-btn btn-nav">← Previous</a>
                    {% else %}
                        <span class="footer-btn btn-nav disabled">← Previous</span>
                    {% endif %}

                    {% if current_q_num < total_questions %}
                        <button type="submit" class="footer-btn btn-nav">Next →</button>
                    {% else %}
                        <button type="submit" class="footer-btn btn-nav">Finish Quiz</button>
                    {% endif %}
                </div>
            </div>
        </form>
    </div>
</div>

{% endblock %}